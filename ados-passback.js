// Generated by CoffeeScript 1.12.6
(function() {
  window.passbackToAdzerk = function(flightId) {
    var div, flightIds, flightMsg, flt, i, iframe, iframes, isMulti, len, ref, ref1, results, win;
    isMulti = flightId instanceof Array;
    flightMsg = "for flight " + (JSON.stringify(flightId));
    flightIds = isMulti ? flightId : [flightId];
    win = window;
    iframes = [];
    while (true) {
      try {
        ref1 = ((ref = win.ados) != null ? ref.currentPassback : void 0) || {};
        for (div in ref1) {
          flt = ref1[div];
          if (flightIds.indexOf(flt) !== -1) {
            console.log("Passing back to Adzerk " + flightMsg + "...");
            return win[(isMulti ? 'azk' : 'ados') + "_passback"](div, flightId);
          }
        }
      } catch (error) {
        iframes.push(win);
      }
      if (win === (win = win.parent)) {
        break;
      }
    }
    if (iframes.length) {
      console.log("Sending Adzerk postMessage " + flightMsg + "...");
      results = [];
      for (i = 0, len = iframes.length; i < len; i++) {
        iframe = iframes[i];
        results.push(iframe.postMessage((isMulti ? {
          flightIds: flightIds
        } : {
          flightId: flightId
        }), '*'));
      }
      return results;
    } else {
      return console.error("Unable to find an appropriate window for Adzerk passback " + flightMsg + ".");
    }
  };

}).call(this);
